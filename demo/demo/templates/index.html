{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Summarization Demo</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/css/vendor/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/css/flat-ui.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/js/vendor/respond.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/js/vendor/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/js/flat-ui.min.js"></script>
</head>
<body>

    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <h1 class="display-4"><a href="/">Summarization Demo</a></h1>
                    <p class="lead">Model: BART trained on XSum</p>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-12">
                    <textarea id="source-text" placeholder="Write an article here" style="width: 100%; height: 200px">
                    </textarea>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-12">
                <button id="generate_sum" type="submit" class="btn btn-primary" style="width: 100%">
                    Generate Summary!
                </button>
            </div>
        </div>

        <div class="row">
            <p id="sum_result"></p>
        </div>
    </div>

    <script type="application/javascript">
        $(document).ready(function() {
            $('#generate_sum').click(function(){
                let text = $('#source-text').val();
                $.post("/api/produce_summary", {
                    "source": text,
                }, render_summary)
            });

            function render_summary(res) {
                console.log(res);
                $("#sum_result").text(res["summary"]);
            }
        });


    </script>
</body>
</html>